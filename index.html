<!DOCTYPE html>
<html>
<head>
    <title>íš¨ë¹ˆê´‘ì—­ì‹œ ì „ìì§€ë„ (Final Fix)</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { margin: 0; background-color: #aaddff; font-family: 'Malgun Gothic', sans-serif; } 
        #map { width: 100vw; height: 100vh; cursor: default; }
        
        .leaflet-popup-content-wrapper { border-radius: 8px; text-align: center; }
        .leaflet-popup-content b { font-size: 1.1em; }
        
        /* ì´ë¦„í‘œ ìŠ¤íƒ€ì¼ */
        .district-label {
            background: transparent; border: none; box-shadow: none;
            font-weight: 900; color: white; text-shadow: 2px 2px 4px #000;
            font-size: 14px; text-align: center; white-space: nowrap;
        }
        .dev-label {
            background: transparent; border: none; box-shadow: none;
            font-weight: 800; color: #ffffcc; text-shadow: 1px 1px 3px #000;
            font-size: 12px; text-align: center; white-space: nowrap;
        }
        .legaldong-label {
            background: transparent; border: none; box-shadow: none;
            font-weight: 700; color: #f0f0f0; text-shadow: 1px 1px 2px #333;
            font-size: 11px; text-align: center; white-space: nowrap;
        }

        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-panel {
            position: absolute; top: 10px; left: 50px; z-index: 1000;
            display: flex; flex-direction: column; gap: 8px;
            max-height: 90vh;
        }
        .btn-group { display: flex; gap: 5px; }
        .map-btn {
            background: white; border: 2px solid #333; border-radius: 5px;
            padding: 8px 12px; font-weight: bold; cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3); font-size: 13px; color: #333;
        }
        .map-btn:hover { background: #eee; }
        .active-btn { background: #333 !important; color: white !important; border-color: white !important; }
        #clear-btn { border-color: red; color: red; }

        /* ìƒ‰ìƒ ì„ íƒ ë°•ìŠ¤ */
        .color-picker-box {
            background: rgba(255, 255, 255, 0.95); padding: 0; border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2); font-size: 12px; width: 180px; overflow: hidden;
        }
        .picker-header {
            padding: 10px; background: #f8f9fa; cursor: pointer; font-weight: bold;
            display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd;
        }
        .picker-header:hover { background: #eee; }
        #current-color-preview { width: 20px; height: 20px; border-radius: 3px; border: 1px solid #999; margin-right: 5px; }
        #palette-list { display: none; padding: 10px; max-height: 300px; overflow-y: auto; }
        .color-option { display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 4px 0; border-bottom: 1px solid #eee; }
        .color-option:last-child { border-bottom: none; }
        .color-option:hover { background: #f0f0f0; }
        .color-preview-small { width: 16px; height: 16px; border-radius: 3px; border: 1px solid #ccc; }

        /* ëª¨ë‹¬ì°½ */
        #color-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;
        }
        .modal-content { background: white; padding: 20px; border-radius: 15px; text-align: center; width: 340px; }
        .color-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0; }
        .color-btn { 
            width: 100%; height: 40px; border-radius: 5px; border: 1px solid #ddd; 
            cursor: pointer; font-size: 11px; color: white; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .cancel-btn { background: #eee; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

<div class="control-panel">
    <div class="btn-group">
        <button id="draw-btn" class="map-btn" onclick="toggleDrawMode()">ğŸ“ ê·¸ë¦¬ê¸°</button>
        <button id="save-btn" class="map-btn" onclick="exportData()">ğŸ’¾ ì €ì¥</button>
        <button id="clear-btn" class="map-btn" onclick="clearAllData()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
    </div>
    <div class="color-picker-box">
        <div class="picker-header" onclick="togglePaletteList()">
            <div style="display:flex; align-items:center;">
                <div id="current-color-preview"></div><span>ìƒ‰ìƒ ì„ íƒ</span>
            </div>
            <span id="toggle-icon">â–¼</span>
        </div>
        <div id="palette-list"></div>
    </div>
</div>

<div id="color-modal">
    <div class="modal-content">
        <h3 style="margin:0">êµ¬ì—­ ì„ íƒ (ìƒ‰ìƒ)</h3>
        <div class="color-grid" id="modal-color-buttons"></div>
        <button class="cancel-btn" onclick="closeColorModal()">ì·¨ì†Œ</button>
    </div>
</div>

<div id="map"></div>

<script>
    // 1. ìƒ‰ìƒ ì •ì˜
    var regionColors = [
        { name: "íš¨ë¹ˆì‹œ(ëŒ€í‘œ)", code: "#7777aa" },
        { name: "ì¤‘êµ¬", code: "#BB9955" },
        { name: "ë™êµ¬", code: "#FF9922" },
        { name: "ì„œêµ¬", code: "#00AABB" },
        { name: "ë‚¨êµ¬", code: "#DDBBFF" },
        { name: "ë¶êµ¬", code: "#7799CC" },
        { name: "ì²­ì—½êµ¬", code: "#006699" },
        { name: "ì°½ì „êµ¬", code: "#33AAFF" },
        { name: "ì•ˆì²œêµ¬", code: "#AA66DD" },
        { name: "íƒ„ì„±êµ°", code: "#BBFF64" },
        { name: "ì„ ê³¡êµ°(ë•ë¹ˆ)", code: "#D6D5CA" },
        { name: "ê¸°ë„êµ°(ë•ë¹ˆ)", code: "#01B7ED" }
    ];

    var currentSelectedColor = regionColors[0].code;

    function togglePaletteList() {
        var list = document.getElementById('palette-list');
        var icon = document.getElementById('toggle-icon');
        if (list.style.display === 'block') { list.style.display = 'none'; icon.innerText = 'â–¼'; } 
        else { list.style.display = 'block'; icon.innerText = 'â–²'; }
    }
    function updateHeaderPreview(color) { document.getElementById('current-color-preview').style.backgroundColor = color; }
    updateHeaderPreview(currentSelectedColor);

    var paletteContainer = document.getElementById('palette-list');
    regionColors.forEach((rc, index) => {
        var label = document.createElement('label'); label.className = 'color-option';
        var radio = document.createElement('input'); radio.type = 'radio'; radio.name = 'drawColor'; radio.value = rc.code;
        if (index === 0) radio.checked = true;
        radio.onclick = function() { currentSelectedColor = rc.code; updateHeaderPreview(rc.code); };
        var box = document.createElement('div'); box.className = 'color-preview-small'; box.style.backgroundColor = rc.code;
        var text = document.createTextNode(rc.name);
        label.appendChild(radio); label.appendChild(box); label.appendChild(text); paletteContainer.appendChild(label);
    });

    // =========================================================
    // 2. í†µí•© ë°ì´í„° (ëª¨ë“  êµ¬ì—­ í•˜ë‚˜ë¡œ í•©ì¹¨)
    // =========================================================
    var allData = [
        // [í–‰ì •êµ¬ì—­] êµ¬
        { name: "ì¤‘êµ¬", code: "jung", type: "admin", points: [ [-11035,12177], [-11251,12413], [-11394,12713], [-11380,13444], [-11383,14436], [-11495,14844], [-11495,15119], [-11404,15331], [-11526,15798], [-11545,16174], [-11538,16540], [-11353,16794], [-11304,16954], [-11280,17302], [-11280,17543], [-11255,17842], [-11102,18267], [-11133,18691], [-11126,19133], [-11098,19673], [-10708,19715], [-10248,19753], [-9952,19844], [-9795,19871], [-9649,19858], [-9635,19475], [-9492,19475], [-9419,19502], [-9255,19175], [-9011,19172], [-9007,18702], [-9000,18399], [-8934,18228], [-8871,18061], [-8854,17929], [-8861,17560], [-8997,17174], [-9046,16881], [-9126,16721], [-9446,16439], [-9781,16115], [-9997,15976], [-10102,15725], [-10070,15168], [-9983,14876], [-9969,14615], [-9830,14322], [-9697,14114], [-9600,13856], [-9485,13762], [-9443,13236], [-9488,13045], [-9642,12805], [-9932,12612], [-9995,12525], [-10298,12389], [-10675,12278], [-10765,12260], [-10807,12302], [-10943,12285], [-11034,12180] ] },
        { name: "ì„œêµ¬", code: "seo", type: "admin", points: [ [-8978,17113], [-8916,17429], [-8842,17763], [-8859,18055], [-8769,18115], [-8531,18254], [-8282,18269], [-8117,18329], [-7789,18458], [-7527,18533], [-7167,18576], [-6768,18599], [-6560,18559], [-5967,18554], [-5783,18507], [-5575,18392], [-5425,18199], [-5324,18047], [-5298,17931], [-5294,17303], [-5287,16876], [-5131,16703], [-5056,16673], [-4766,16636], [-4749,16326], [-4438,16319], [-4283,16315], [-4281,15801], [-3766,15801], [-3773,15297], [-3607,15274], [-3442,15282], [-3393,15254], [-3356,15087], [-3408,15053], [-3522,14877], [-3786,14678], [-4037,14652], [-4341,14586], [-4624,14350], [-5161,13621], [-5375,13131], [-5598,12916], [-5912,12890], [-6077,13238], [-6281,13579], [-6395,13862], [-6524,14374], [-6633,14974], [-6751,15300], [-6863,15718], [-6978,15894], [-7131,15840], [-7296,15765], [-7448,15776], [-7579,15917], [-7817,16121], [-7989,16243], [-8358,16547], [-8660,16781], [-8748,16867], [-8873,17014], [-8922,17102], [-8978,17109] ] },
        { name: "ë™êµ¬", code: "dong", type: "admin", points: [ [-11160,22972], [-11151,23235], [-11134,23326], [-10900,23354], [-10822,23612], [-10781,24101], [-10699,24224], [-10485,24587], [-10309,24802], [-10190,24993], [-10057,25048], [-9960,25211], [-9863,25523], [-9668,25554], [-9453,25569], [-9080,25533], [-8861,25529], [-8813,25008], [-8749,24763], [-8713,24742], [-8628,24293], [-8543,23878], [-8516,23544], [-8458,23199], [-8425,23075], [-8370,22841], [-8361,22362], [-8309,21617], [-8261,21050], [-8357,20856], [-8405,20784], [-8633,20748], [-8733,20748], [-8805,20728], [-8809,20648], [-8910,20639], [-9088,20605], [-9185,20523], [-9301,20291], [-9408,20212], [-9519,19966], [-9606,19991], [-9689,19864], [-9870,19872], [-10136,19788], [-10447,19731], [-11104,19674], [-11047,19870], [-10979,20141], [-10977,20922], [-10988,21272], [-10974,21351], [-10849,21357], [-10812,21807], [-10645,22149], [-10628,22321], [-10742,22409], [-10903,22545], [-10943,22737], [-10940,22986], [-11149,22980] ] },
        // ë‚¨êµ¬ (MultiPolygon ë‹¨ì¼í™”)
        { 
            name: "ë‚¨êµ¬", code: "nam", type: "admin", color: "#DDBBFF",
            points: [ 
                [ [-13391,15285], [-13033,15192], [-12798,15131], [-12295,15116], [-12303,15135], [-12305,15368], [-12167,15505], [-11813,15807], [-11524,15827], [-11402,15331], [-11502,15104], [-11494,14837], [-11381,14427], [-11380,13633], [-11394,12709], [-11250,12408], [-11032,12178], [-11072,12108], [-11113,12026], [-11123,11984], [-11124,11920], [-11124,11877], [-11118,11815], [-11124,11737], [-11134,11681], [-11149,11570], [-11150,11495], [-11152,11494], [-11166,11380], [-11174,11272], [-11185,11112], [-11219,10985], [-11227,10859], [-11227,10736], [-11227,10592], [-11258,10469], [-11278,10363], [-11278,10242], [-11259,10170], [-11180,10091], [-11166,10033], [-11097,9912], [-11063,9794], [-10994,9656], [-10928,9521], [-10841,9399], [-10786,9336], [-10715,9238], [-10707,9167], [-10449,8608], [-10423,8461], [-10223,8227], [-10126,8088], [-10014,7977], [-9911,7843], [-9874,7778], [-9852,7710], [-9812,7669], [-9688,7470], [-9630,7430], [-9608,7396], [-9569,7348], [-9501,7297], [-9413,7159], [-9399,7017], [-9392,6841], [-9393,6521], [-9441,6083], [-9402,5843], [-9227,5323], [-9138,4937], [-9091,4554], [-9045,4171], [-9038,4057], [-8862,3936], [-8806,3814], [-8803,3532], [-8612,3163], [-8310,3317], [-8183,3056], [-8242,3030], [-8240,2966], [-8369,2882], [-8343,2808], [-8564,2670], [-8491,2518], [-8251,2641], [-8193,2583], [-8050,2576], [-7621,2728], [-7594,1440], [-7843,932], [-8426,963], [-8429,840], [-8298,837], [-8298,809], [-9044,809], [-9171,985], [-9407,1561], [-9510,2033], [-9550,2052], [-9757,2278], [-9819,2413], [-10057,2548], [-10196,2662], [-10378,2854], [-10591,3189], [-10739,3595], [-10839,3873], [-10930,4043], [-11019,4122], [-11085,4227], [-11208,4343], [-11285,4351], [-11350,4368], [-11500,4560], [-11796,4783], [-11920,4950], [-11983,5060], [-12024,5232], [-12024,5335], [-12003,5407], [-11965,5470], [-11945,5577], [-11945,5693], [-11925,5966], [-11933,6063], [-11970,6151], [-12029,6210], [-12132,6260], [-12211,6296], [-12317,6420], [-12430,6546], [-12556,6747], [-12598,6829], [-12626,6835], [-12676,6954], [-12756,7084], [-12766,7171], [-12824,7281], [-12892,7350], [-12990,7451], [-13059,7515], [-13278,7737], [-13440,7850], [-13508,7882], [-13606,7995], [-13675,8037], [-13738,8098], [-13864,8162], [-13952,8178], [-13984,8159], [-14117,8004], [-14349,7975], [-14579,7935], [-14825,7777], [-15045,7638], [-15159,7615], [-15200,7576], [-15376,7441], [-15476,7357], [-15541,7344], [-15751,7349], [-15970,7334], [-16174,7250], [-16436,7164], [-16835,7086], [-17310,6937], [-17641,6921], [-17855,6935], [-17867,6923], [-17896,6891], [-17946,6886], [-17969,6869], [-17993,6823], [-18034,6795], [-18112,6775], [-18167,6760], [-18368,6774], [-18394,6800], [-18426,6809], [-18456,6862], [-18520,6889], [-18579,6902], [-18633,6881], [-18702,6827], [-18790,6619], [-18817,6372], [-18836,6361], [-18891,6360], [-18980,6374], [-19022,6376], [-19071,6364], [-19109,6363], [-19178,6343], [-19190,6356], [-19199,6369], [-19282,6351], [-19438,6364], [-19479,6419], [-19652,6797], [-19870,7095], [-20023,7296], [-20071,7377], [-20268,7413], [-20420,7443], [-20491,7499], [-20561,7575], [-20576,7735], [-20552,7830], [-20548,8347], [-20506,8387], [-20396,8383], [-20182,8324], [-19870,8428], [-19742,8521], [-19578,8539], [-19224,8532], [-19056,8549], [-19002,8620], [-18898,8856], [-18794,9064], [-18756,9156], [-18711,9464], [-18673,9607], [-18632,9615], [-18545,9929], [-18434,10216], [-18258,10604], [-18182,10843], [-18055,10972], [-17964,11005], [-17525,11000], [-17253,11102], [-17154,11323], [-17035,11492], [-16827,11485], [-16576,11990], [-16426,12291], [-16223,12561], [-16007,12531], [-15948,12468], [-15847,12367], [-15529,12117], [-15432,12071], [-15405,12057], [-15345,12059], [-15271,12070], [-15131,12060], [-14952,11970], [-14822,11878], [-14774,11852], [-14711,11798], [-14685,11836], [-14635,11855], [-14608,11882], [-14636,12277], [-14790,12547], [-14927,12777], [-15003,12962], [-15015,13429], [-15015,13644], [-14966,13638], [-15039,14372], [-15060,14554], [-15236,14857], [-15403,15060], [-15600,15078], [-15664,15039], [-15761,15090], [-15764,15148], [-15700,15181], [-15652,15233], [-15558,15291], [-15355,15312], [-15258,15303], [-15185,15221], [-15079,15157], [-15018,15127], [-14945,15027], [-14872,14969], [-14766,14954], [-14669,15012], [-14484,15151], [-14442,15239], [-14348,15278], [-14296,15284], [-14260,15203], [-14187,15154], [-14047,15154], [-13853,15181], [-13805,15224], [-13735,15213], [-13668,15207], [-13609,15203], [-13562,15192], [-13510,15203], [-13479,15207], [-13428,15280], [-13410,15292], [-13389,15287] ] 
                , [ [-13384,15285], [-12977,15195], [-12782,15134], [-12626,15124], [-12321,15119], [-12295,15349], [-11842,15795], [-11532,15847] ]
                , [ [-11547,15844], [-11547,15782], [-11394,15312], [-11496,15035], [-11474,14702], [-11394,14453], [-11394,13463], [-11401,12704], [-11211,12374] ]
                , [ [-11207,12355], [-11040,12169], [-11110,12040], [-11130,11875], [-11168,11177], [-11239,10587], [-11286,10317], [-11261,10163], [-11153,10034], [-11068,9807], [-10712,9194], [-10439,8549], [-10416,8413], [-10077,8030], [-9903,7809], [-9697,7511], [-9490,7252], [-9421,7091], [-9402,6534], [-9445,6096], [-9280,5507], [-9175,5142], [-9117,4720], [-9036,4096], [-8933,3966], [-8815,3856], [-8791,3567], [-8618,3155], [-8307,3322], [-8206,3063], [-8253,2935], [-8129,2814], [-7747,2684], [-7614,2722], [-7606,1417], [-7846,945], [-8290,812] ] 
            ] 
        },
        { 
            name: "ë¶êµ¬", code: "buk", type: "admin", points: [ [-3357,15081], [-3275,15163], [-3133,15145], [-3023,15154], [-2917,15281], [-2850,15381], [-2732,15572], [-2638,15645], [-2577,15645], [-2493,15594], [-2411,15594], [-2223,15657], [-2186,15824], [-2147,15936], [-2156,16145], [-2174,16285], [-2174,16455], [-2262,16597], [-2268,16730], [-2292,16718], [-2286,16633], [-2259,16558], [-2226,16500], [-2204,16452], [-2301,16294], [-2368,16336], [-2626,16661], [-2738,16888], [-2872,17085], [-3500,17740], [-3691,18355], [-3797,19071], [-3912,19344], [-4130,19586], [-4118,20644], [-4091,21147], [-3945,21635], [-3867,22126], [-3730,22414], [-3666,22812], [-3627,22875], [-3685,23372], [-3870,23554], [-3930,23700], [-4064,23882], [-4346,24136], [-4540,24488], [-4564,24800], [-4591,25222], [-4798,25743], [-4870,26219], [-4995,27134], [-5059,28562], [-5107,29441], [-5292,30072], [-5322,30348], [-5374,30839], [-5465,31190], [-5708,31215], [-6072,31233], [-6405,31203], [-6545,31048], [-6972,30836], [-7251,30721], [-7543,30536], [-7527,30126], [-7497,29902], [-7643,29793], [-7879,29784], [-7940,29666], [-8116,29369], [-8274,29135], [-8610,29029], [-8865,28068], [-8877,27159], [-8844,26865], [-8610,26749], [-8562,26292], [-8549,25667], [-8522,25385], [-8856,25525], [-8814,25097], [-8814,24997], [-8777,24867], [-8735,24749], [-8707,24746], [-8635,24330], [-8538,23839], [-8525,23672], [-8510,23409], [-8453,23221], [-8371,22872], [-8349,22396], [-8322,21626], [-8255,21032], [-8401,20787], [-8647,20753], [-8801,20735], [-8814,20656], [-9080,20605], [-9174,20514], [-9304,20305], [-9411,20208], [-9517,19968], [-9593,19986], [-9687,19874], [-9647,19841], [-9626,19477], [-9462,19474], [-9414,19510], [-9244,19171], [-9013,19177], [-9004,18537], [-9004,18395], [-8840,18043], [-8516,18264], [-8258,18273], [-7603,18525], [-6775,18601], [-6587,18568], [-5968,18549], [-5783,18498], [-5565,18395], [-5316,18049], [-5279,17309], [-5283,16879], [-5107,16685], [-4764,16637], [-4752,16327], [-4279,16312], [-4279,15800], [-3757,15797], [-3769,15303], [-3557,15269], [-3423,15269], [-3387,15245], [-3341,15066] ] 
        },
        { 
            name: "ì²­ì—½êµ¬", code: "cheong", type: "admin", 
            points: [ [-12298,15116], [-12800,15132], [-13392,15285], [-13313,15506], [-13387,15818], [-13624,16372], [-13630,16562], [-14020,17016], [-14448,17385], [-14870,18493], [-15251,19380], [-14627,19686], [-14400,19908], [-14209,20488], [-13988,20742], [-13945,21306], [-13645,22025], [-13318,23154], [-13344,23592], [-13165,23972], [-12969,24606], [-12404,24595], [-12367,24917], [-12235,24896], [-12240,25228], [-12098,25571], [-12034,25677], [-11585,25919], [-11279,25904], [-11046,26141], [-10594,26205], [-10351,26173], [-9939,25957], [-9770,25872], [-9865,25513], [-10044,25028], [-10155,24986], [-10383,24711], [-10721,24168], [-10784,23978], [-10884,23355], [-11101,23324], [-11143,23302], [-11149,23012], [-11154,22965], [-10932,22991], [-10932,22717], [-10890,22500], [-10620,22332], [-10647,22157], [-10816,21820], [-10847,21361], [-10953,21345], [-10995,21276], [-10974,20722], [-10985,20073], [-11096,19662], [-11133,18833], [-11112,18374], [-11080,18263], [-11244,17878], [-11286,17509], [-11291,17023], [-11339,16807], [-11539,16554], [-11529,16427], [-11545,16095], [-11534,15831], [-11819,15805], [-11888,15741], [-12047,15615], [-12305,15367], [-12305,15134] ]
        },
        { 
            name: "ì°½ì „êµ¬", code: "chang", type: "admin", 
            points: [ [-15221,19372], [-14653,19671], [-14403,19919], [-14242,20477], [-13992,20746], [-13939,21270], [-13644,22031], [-13474,22741], [-13316,23180], [-13348,23603], [-13150,23950], [-12969,24589], [-12394,24589], [-12380,24918], [-12222,24911], [-12245,25269], [-12070,25640], [-11615,25908], [-11286,25915], [-11013,26147], [-10587,26219], [-10647,26685], [-11029,28386], [-12007,28164], [-12709,28099], [-13366,27969], [-14023,27781], [-14260,28522], [-14465,29065], [-14783,29504], [-15346,29426], [-15528,28880], [-15759,27836], [-15830,27388], [-15999,26526], [-16243,26214], [-16428,26143], [-16272,26016], [-16230,25980], [-16048,25970], [-15989,25928], [-15905,25697], [-15703,25278], [-15583,25135], [-15401,25005], [-15193,24661], [-15128,24472], [-15060,24147], [-15034,23799], [-15131,23455], [-15265,23321], [-15378,23279], [-15544,23386], [-15931,23403], [-16074,23380], [-16155,23289], [-16227,23250], [-16240,23133], [-16295,23032], [-16350,22948], [-16367,22837], [-16393,22759], [-16636,22733], [-16805,22743], [-16822,22632], [-16835,22369], [-16822,22054], [-16627,21729], [-16575,21563], [-16415,21358], [-16237,21160], [-16107,21118], [-15989,21004], [-15817,20591], [-15700,20318], [-15538,20094], [-15427,19827], [-15229,19385] ] 
        },
        { 
            name: "ì•ˆì²œêµ¬", code: "an", type: "admin", 
            points: [ [-8861,25532], [-9202,25541], [-9498,25566], [-9856,25521], [-9775,25882], [-9953,25959], [-10111,26081], [-10386,26192], [-10581,26216], [-10667,26810], [-10920,27906], [-11031,28382], [-11257,28333], [-11272,29729], [-11342,29864], [-11385,30066], [-11779,30550], [-11816,30640], [-11745,30705], [-11959,30919], [-12073,31106], [-12077,31294], [-12069,31871], [-11440,31875], [-11261,31710], [-11265,32656], [-11087,33004], [-10873,33497], [-10924,34162], [-10963,35110], [-11216,35461], [-11289,35727], [-11426,36735], [-11409,37207], [-11263,37567], [-11340,38588], [-11298,39240], [-11276,39965], [-10744,40033], [-10307,40274], [-9736,41191], [-9505,41736], [-9365,42264], [-8592,42420], [-7578,42621], [-6746,42719], [-6557,42225], [-6487,41828], [-6228,41255], [-6312,40991], [-6780,40524], [-6959,40355], [-6842,39777], [-6837,38974], [-6901,38629], [-7078,38254], [-7251,38210], [-7201,37574], [-7014,36801], [-6915,36392], [-6802,35968], [-5851,35604], [-5896,34978], [-5679,34456], [-5181,33899], [-5038,33209], [-5053,32855], [-5186,32298], [-5250,32047], [-5501,31835], [-5477,31200], [-5837,31227], [-6413,31213], [-6527,31050], [-7271,30715], [-7542,30533], [-7541,30259], [-7501,29909], [-7637,29799], [-7891,29791], [-7928,29680], [-8277,29128], [-8612,29030], [-8874,28083], [-8874,27192], [-8857,26872], [-8616,26745], [-8571,26499], [-8562,25803], [-8528,25392], [-8871,25531] ] 
        },
        // --- [í–‰ì •êµ¬ì—­: ì/ë©´/ë¦¬ (Gun/Eup/Myeon/Ri)] ---
        { 
            name: "ì„ ê³¡êµ° ê·€ì´ë©´(ì¼ë¶€)", code: "D6D5CA", type: "town", 
            points: [ [-14427,36800], [-13699,36816], [-13559,36777], [-13468,37128], [-12991,38214], [-12887,38951], [-12701,39244], [-12301,39244], [-11902,39920], [-11827,40788], [-11598,42066], [-11282,43271], [-10970,43908], [-10888,44749], [-10544,45260], [-10411,45910], [-12636,45910], [-12624,42120], [-14438,42132], [-14420,36800] ] 
        },
        { name: "íƒ„ì„±êµ° íƒ„ì„±ì", code: "tan", type: "town", points: [ [-16426,26144], [-16454,26157], [-16481,26210], [-16496,26236], [-16544,26267], [-16570,26287], [-16578,26308], [-16595,26356], [-16578,26390], [-16579,26418], [-16582,26441], [-16643,26485], [-16682,26504], [-16789,26504], [-16860,26524], [-16961,26516], [-17015,26499], [-17066,26472], [-17114,26441], [-17189,26361], [-17245,26335], [-17387,26340], [-17446,26338], [-17466,26332], [-17551,26353], [-17654,26358], [-17793,26407], [-17904,26491], [-18026,26584], [-18155,26810], [-18193,26906], [-18193,26924], [-18212,26944], [-18229,27049], [-18256,27135], [-18306,27249], [-18348,27354], [-18433,27485], [-18501,27652], [-18542,27739], [-18550,27872], [-18536,27919], [-18531,27979], [-18558,28031], [-18577,28059], [-18573,28276], [-18579,28411], [-18572,28575], [-18582,28707], [-18578,28739], [-18574,28808], [-18553,28929], [-18546,29018], [-18566,29110], [-18567,29175], [-18574,29218], [-18570,29264], [-18625,29316], [-18648,29382], [-18656,29420], [-18645,29511], [-18646,29645], [-18658,29801], [-18663,29905], [-18662,29976], [-18662,30079], [-18647,30219], [-18640,30268], [-18733,30320], [-18768,30336], [-18814,30324], [-18875,30338], [-18925,30391], [-18993,30419], [-18994,30444], [-19091,30439], [-19116,30458], [-19170,30487], [-19170,30612], [-19759,31043], [-19623,31460], [-19445,31638], [-19626,31830], [-19320,32082], [-19261,32297], [-18972,32893], [-18200,32896], [-17979,33111], [-17889,33445], [-17792,33555], [-17577,33674], [-17506,34039], [-17600,34443], [-16683,34446], [-16205,34460], [-15842,34466], [-15891,34056], [-16015,33739], [-16236,33603], [-16219,33148], [-16230,32908], [-16216,32664], [-16208,32413], [-16106,32150], [-16049,31986], [-15888,31782], [-15922,31163], [-15964,30258], [-15998,29769], [-16001,29619], [-15930,29546], [-15342,29432], [-15562,28788], [-15715,28098], [-15939,26831], [-16001,26512], [-16222,26229], [-16425,26147] ] },
        { name: "íƒ„ì„±êµ° í‘íƒë©´", code: "tan", type: "town", points: [ [-14023,27774], [-14437,29029], [-14603,29263], [-14773,29497], [-15334,29424], [-15982,29566], [-16028,29718], [-15913,31776], [-16074,32028], [-16244,32451], [-15586,32359], [-14943,32194], [-14612,31959], [-14056,31766], [-13430,32488], [-12782,32437], [-12594,32304], [-12428,31730], [-12350,31472], [-12060,31289], [-12069,31096], [-11895,30843], [-11725,30692], [-11803,30623], [-11651,30402], [-11453,30126], [-11371,30035], [-11348,29869], [-11302,29759], [-11260,29695], [-11247,28326], [-11987,28160], [-12667,28091], [-13522,27926], [-14023,27756] ] },
        { name: "íƒ„ì„±êµ° ë„ë³€ì", code: "tan", type: "town", points: [ [-11267,39960], [-11892,39932], [-12296,39241], [-12692,39252], [-12873,38958], [-12979,38354], [-13002,38164], [-13326,37433], [-13471,37105], [-13554,36781], [-13671,36820], [-14418,36799], [-14418,34461], [-15252,34461], [-15854,34463], [-15891,34118], [-15896,34031], [-16015,33735], [-16250,33592], [-16225,32832], [-16211,32439], [-15471,32340], [-14968,32209], [-14876,32161], [-14584,31952], [-14055,31768], [-13681,32207], [-13424,32494], [-12788,32457], [-12590,32292], [-12431,31732], [-12349,31472], [-12080,31297], [-12059,31862], [-11436,31876], [-11257,31709], [-11273,32655], [-11087,32990], [-10873,33505], [-10942,34423], [-10951,34995], [-10963,35129], [-11199,35446], [-11248,35639], [-11291,35698], [-11351,36105], [-11390,36493], [-11413,36638], [-11429,36824], [-11406,37053], [-11406,37226], [-11257,37579], [-11305,38184], [-11349,38579], [-11305,39180], [-11266,39886], [-11266,39964] ] },
        { name: "íƒ„ì„±êµ° ì•¼ì§„ì", code: "tan", type: "town", points: [ [-18953,32891], [-19002,33800], [-19027,33965], [-19032,34467], [-17598,34462], [-17499,34078], [-17556,33788], [-17573,33674], [-17822,33527], [-17894,33394], [-17980,33118], [-18177,32911], [-18204,32891], [-18800,32904], [-18958,32891] ] },
        { name: "íƒ„ì„±êµ° ì„œëª©ì", code: "tan", type: "town", points: [ [-20625,28102], [-20698,28168], [-20770,28247], [-20841,28272], [-20955,28383], [-20987,28476], [-21061,28575], [-21174,28673], [-21221,28710], [-21465,28676], [-21605,28617], [-21635,28614], [-21627,29924], [-21625,31633], [-21627,33440], [-21625,34467], [-20317,34462], [-19028,34459], [-19008,33876], [-18952,32899], [-19250,32276], [-19297,32084], [-19629,31833], [-19432,31636], [-19617,31461], [-19750,31038], [-19954,30986], [-20171,30850], [-20250,30725], [-20262,30594], [-20213,30388], [-20105,30038], [-20090,29757], [-20102,28566], [-20198,28236], [-20240,28120], [-20341,28079], [-20403,28096], [-20487,28081], [-20629,28098] ] },
        { name: "íƒ„ì„±êµ° ì†Œì›ë©´", code: "tan", type: "town", points: [ [-6235,41256], [-5858,42074], [-5221,42110], [-4867,42107], [-4607,41330], [-3966,41038], [-3596,40742], [-3602,38430], [-3937,38309], [-4304,38137], [-4522,38037], [-4551,37855], [-4496,37481], [-4483,37263], [-4776,37046], [-4795,36890], [-4961,36766], [-5097,36451], [-5120,36325], [-5302,36230], [-5410,36094], [-5569,35912], [-5738,35876], [-5842,35597], [-6804,35971], [-7178,37488], [-7253,38225], [-7071,38267], [-6889,38725], [-6833,38972], [-6846,39830], [-6960,40349], [-6310,41002], [-6219,41272] ] },
        { name: "íƒ„ì„±êµ° ê³ í•´ì", code: "tan", type: "town", points: [ [-11283,39955], [-11897,39927], [-11820,40798], [-11632,41884], [-11350,43047], [-11280,43287], [-10977,43903], [-10301,44495], [-10036,45150], [-9810,45334], [-9594,45898], [-9588,45944], [-5534,45948], [-5189,45948], [-5049,45798], [-4896,45794], [-4614,45634], [-4074,45373], [-3886,45122], [-3715,44691], [-3694,44492], [-3687,44287], [-3666,44220], [-3715,43472], [-3757,43183], [-3760,42636], [-3590,42142], [-3598,40745], [-3936,41010], [-4632,41334], [-4873,42121], [-5859,42079], [-6221,41264], [-6448,41759], [-6615,42396], [-6744,42741], [-7552,42619], [-8664,42403], [-9378,42263], [-9500,41755], [-9831,41010], [-10252,40380], [-10329,40261], [-10702,40080], [-10733,40028], [-11284,39955] ] },
        { name: "íƒ„ì„±êµ° ë„í–¥ë©´", code: "tan", type: "town", points: [ [-10951,43912], [-10961,43972], [-10892,44743], [-10532,45263], [-10413,45929], [-9580,45919], [-9787,45331], [-10004,45148], [-10289,44468], [-10923,43907] ] },
        { name: "ê¸°ë„êµ° ì—¼ê³¡ë©´ ì¤‘ë§Œë¦¬", code: "gido", color: "#01B7ED", type: "town", points: [ [-1050,14787], [-1141,14690], [-1198,14663], [-1289,14678], [-1326,14660], [-1408,14642], [-1445,14617], [-1551,14687], [-1704,14899], [-1765,15002], [-1764,15108], [-1725,15187], [-1773,15261], [-1757,15442], [-1774,15573], [-1752,15722], [-1704,15789], [-1711,15833], [-1682,15893], [-1670,16034], [-1585,16062], [-1539,16070], [-1508,16112], [-1320,16111], [-1260,16024], [-1226,16013], [-1184,16107], [-1081,16086], [-1076,16120], [-1042,16173], [-1053,16332], [-1058,16398], [-1029,16414], [-997,16340], [-990,16184], [-998,16145], [-1049,16076], [-1045,15933], [-1019,15824], [-995,15802], [-968,15727], [-976,15608], [-949,15527], [-940,15289], [-956,15198], [-983,15159], [-975,15056], [-1020,14949], [-1050,14786] ] },
        { name: "ê¸°ë„êµ° ì—¼ê³¡ë©´ ì‹ ì‚°ë¦¬", code: "gido", color: "#01B7ED", type: "town", points: [ [-474,14517], [-524,14540], [-623,14515], [-736,14499], [-777,14501], [-825,14588], [-841,14678], [-858,14926], [-775,15025], [-713,15277], [-667,15530], [-639,15732], [-533,16036], [-651,16228], [-667,16270], [-628,16270], [-575,16405], [-550,16396], [-528,16369], [-544,16320], [-553,16238], [-505,16111], [-457,16086], [-344,16277], [-202,16474], [-106,16647], [-2,16725], [-9,15769], [-5,14779], [-117,14673], [-170,14607], [-218,14556], [-467,14508] ] }
    ];

    var devData = [
        { name: "íš¨ë¹ˆë™ì‹ ë„ì‹œ ê°œë°œì‚¬ì—…ì§€êµ¬", color: "#7777aa", points: [ [-11377,16916], [-11370,17106], [-11313,17272], [-11322,17405], [-11138,17506], [-10968,17485], [-10973,17862], [-10975,18294], [-10984,18740], [-11545,18738], [-11538,18264], [-11899,18269], [-11880,18726], [-12145,18738], [-12147,19181], [-12614,19186], [-12628,18414], [-12602,16886], [-12087,16902], [-12080,16679], [-11903,16688], [-11890,16394], [-11667,16376], [-11520,16383], [-11522,16164], [-10970,16174], [-10984,16909], [-11375,16913] ] },
        { name: "ì†Œì¥ì§€êµ¬ ì¬ê°œë°œì‚¬ì—… ë¶€ì§€", color: "#7777aa", points: [ [-9057,16940], [-9321,16716], [-9431,16964], [-9467,17152], [-9294,17189], [-9164,17286], [-9124,17449], [-9142,17589], [-8793,17761], [-8769,17604], [-8739,17486], [-8727,17301], [-8751,17170], [-8924,17098], [-8991,17104], [-9018,17052], [-9057,16949] ] },
        { name: "í‘íƒ íŒ”ì›” ê°œë°œì§€êµ¬", color: "#7777aa", points: [ [-12055,28153], [-12006,28448], [-11801,29023], [-11655,29231], [-11245,29225], [-11245,29764], [-11252,30814], [-11369,30999], [-12042,31236], [-12045,31012], [-12058,28159] ] },
        { name: "í‘íƒ ë£¨ë¹„ ê°œë°œ ì§€êµ¬", color: "#7777aa", points: [ [-12087,31236], [-12533,31252], [-12568,32279], [-12783,32445], [-13160,32464], [-13144,29803], [-12393,29810], [-12406,29563], [-12864,29563], [-12864,29056], [-12585,29043], [-12591,28078], [-12042,28159], [-12029,31233], [-12230,31239], [-12520,31246], [-12572,32276], [-12770,32438] ] },
        { name: "íš¨ë¹ˆê³µí•­ì‹ ë„ì‹œ ì œ1íƒì§€ì§€êµ¬(ì‹ ì‚°ì§€êµ¬)", color: "#01B7ED", points: [ [-13,15075], [-562,15062], [-562,15475], [-501,15845], [-146,16437], [-7,16632], [-7,15072] ] },
        { name: "ê³ ì†¡ì‹ ë„ì‹œ 1ì§€êµ¬(íš¨ë¹ˆì‹œì²­ì‹ ë„ì‹œ-í† ëª¨ë¦¬ì§€êµ¬)", color: "#7777aa", points: [ [-3401,15292], [-3769,15292], [-3781,15804], [-4281,15796], [-4273,16316], [-4729,16316], [-4769,16640], [-4741,16760], [-4433,16760], [-4437,17296], [-4137,17336], [-3749,17316], [-3148,17320], [-2996,17216], [-2656,16732], [-2340,16336], [-2284,16292], [-2224,16472], [-2292,16716], [-2212,16652], [-2140,15972], [-2248,15620], [-2456,15584], [-2612,15664], [-2740,15568], [-2960,15200], [-3012,15152], [-3252,15160], [-3337,15096], [-3397,15280] ] },
        { name: "ê³ ì†¡2ì‹ ë„ì‹œ(íš¨ë¹ˆì‹œì²­ì‹ ë„ì‹œ-ê³ ì†¡ì§€êµ¬)", color: "#7777aa", points: [ [-4745,16724], [-4781,17328], [-5262,17324], [-5286,18000], [-5302,18744], [-5434,19048], [-5606,19560], [-5454,19516], [-5450,20032], [-5458,20488], [-4753,20496], [-4133,20476], [-4129,19572], [-3929,19392], [-3821,18968], [-3673,18196], [-3497,17760], [-3140,17336], [-4089,17340], [-4421,17288], [-4429,16768], [-4717,16732] ] },
        { name: "ì•µë‚´íƒì§€ê°œë°œì§€êµ¬", color: "#7777aa", points: [ [-11268,37495], [-12317,36599], [-12333,37007], [-13017,37023], [-12653,37923], [-12837,38159], [-12745,39167], [-12260,39231], [-11264,39327], [-11340,38487], [-11228,37555], [-11272,37467] ] },
        { name: "ì´ì2ì§€êµ¬", color: "#7777aa", points: [ [-10303,36730], [-10450,36724], [-10467,38302], [-9963,38313], [-9748,38313], [-9544,38709], [-9397,38822], [-9201,38984], [-9210,39320], [-9019,39287], [-8992,39669], [-8943,39781], [-8634,39587], [-8752,39326], [-8500,39338], [-8388,39102], [-8540,38635], [-8582,38193], [-8582,38135], [-8679,38063], [-9049,38087], [-9028,37278], [-9049,37168], [-9001,36641], [-9486,36650], [-10281,36732] ] },
        { name: "ì´ì1ì§€êµ¬", color: "#7777aa", points: [ [-8130,35723], [-8294,36208], [-8400,37074], [-8388,38135], [-8394,38305], [-7245,38244], [-7242,36832], [-7008,36838], [-6905,36402], [-7263,36377], [-7239,35708], [-8124,35711] ] },
        { name: "ì¤‘ìˆ˜ë²•ì¡°ì§€êµ¬", color: "#7777aa", points: [ [-6297,24506], [-6464,24548], [-6488,24233], [-7216,24194], [-7270,24560], [-7249,24748], [-6755,25297], [-6728,25454], [-6712,25639], [-6640,25630], [-6643,26597], [-6024,26621], [-6036,25103], [-5921,25057], [-5915,24548], [-6266,24542], [-6300,24503] ] },
        { name: "ì¤‘ìˆ˜í–‰ì •íƒ€ìš´ì§€êµ¬", color: "#7777aa", points: [ [-5915,24542], [-5921,25082], [-6027,25100], [-6006,26613], [-5894,26958], [-5642,27340], [-5593,27331], [-5554,26816], [-4929,26810], [-4817,25867], [-4583,25203], [-4547,24530], [-4947,24567], [-5490,24567], [-5524,24576], [-5909,24543] ] }
    ];

    var legalDongData = [
        { name: "ì‹¬ë™1ê°€", color: "#BB9955", points: [ [-10073,15175], [-10375,15400], [-10522,15450], [-10554,15515], [-10554,15597], [-10510,15638], [-10494,15698], [-10469,15745], [-10337,15741], [-10254,15728], [-10201,15728], [-10152,15707], [-10089,15680], [-10092,15480], [-10078,15339], [-10069,15297], [-10070,15171] ] },
        { name: "ì‹¬ë™2ê°€", color: "#BB9955", points: [ [-10468,15746], [-10475,15796], [-10507,15853], [-10533,15911], [-10523,15995], [-10452,16006], [-10397,16024], [-10319,16035], [-10223,16080], [-10117,16157], [-10069,16022], [-10027,15974], [-10000,15937], [-10085,15782], [-10097,15736], [-10087,15680], [-10199,15727], [-10257,15727], [-10337,15741], [-10467,15744] ] },
        { name: "ì¤‘ì•™ë¡œ1ê°€", color: "#BB9955", points: [ [-9999,15938], [-10068,16020], [-10083,16071], [-10016,16119], [-9952,16183], [-9850,16275], [-9810,16359], [-9677,16407], [-9584,16307], [-9601,16279], [-9601,16250], [-9778,16133], [-9881,16063], [-9953,16013], [-9999,15938] ] },
        { name: "ì¤‘ì•™ë¡œ2ê°€", color: "#BB9955", points: [ [-10109,16152], [-10016,16283], [-9956,16433], [-9922,16460], [-9678,16407], [-9811,16355], [-9843,16276], [-9991,16146], [-10084,16069], [-10108,16149] ] },
        { name: "ì¤‘ì•™ë¡œ3ê°€", color: "#BB9955", points: [ [-9992,16356], [-10013,16413], [-10013,16518], [-10016,16560], [-9993,16588], [-9957,16613], [-9911,16679], [-9799,16621], [-9733,16609], [-9722,16542], [-9722,16439], [-9667,16413], [-9904,16460], [-9955,16441], [-9984,16354] ] },
        { name: "ì¤‘ì•™ë¡œ4ê°€", color: "#BB9955", points: [ [-9731,16606], [-9670,16698], [-9726,16741], [-9767,16789], [-9822,16827], [-9858,16771], [-9911,16738], [-9907,16682], [-9792,16620], [-9717,16610] ] },
        { name: "ì†Œì¥ë™2ê°€", color: "#BB9955", points: [ [-9579,16309], [-9669,16406], [-9664,16420], [-9717,16441], [-9729,16607], [-9664,16703], [-9769,16788], [-9820,16829], [-9740,16965], [-9693,17004], [-9654,16985], [-9591,16980], [-9558,16965], [-9516,16945], [-9491,16957], [-9473,16851], [-9447,16767], [-9408,16701], [-9385,16689], [-9322,16635], [-9299,16598], [-9297,16592], [-9341,16562], [-9391,16513], [-9434,16448], [-9510,16371], [-9581,16307] ] },
        { name: "ì†Œì¥ë™1ê°€", color: "#BB9955", points: [ [-9294,16594], [-9190,16668], [-9140,16736], [-9080,16803], [-9049,16833], [-9038,16910], [-9036,17001], [-9014,17094], [-9088,17117], [-9259,17154], [-9287,17204], [-9328,17191], [-9447,17136], [-9488,16961], [-9461,16827], [-9446,16764], [-9347,16654], [-9291,16592] ] },
        { name: "ì¤‘ì•™ë¡œ5ê°€", color: "#BB9955", points: [ [-9914,16740], [-9990,16775], [-10041,16837], [-10067,16883], [-10059,16925], [-9984,16993], [-9936,17057], [-9862,17134], [-9832,17184], [-9769,17178], [-9732,17155], [-9715,17107], [-9700,17100], [-9660,17081], [-9651,17040], [-9678,17004], [-9690,17004], [-9733,16965], [-9785,16891], [-9847,16786], [-9867,16766], [-9910,16740] ] },
        { name: "ì¤‘ì•™ë¡œ6ê°€", color: "#BB9955", points: [ [-9490,16957], [-9518,16944], [-9590,16979], [-9659,16986], [-9680,17002], [-9649,17042], [-9658,17080], [-9713,17106], [-9728,17151], [-9770,17180], [-9828,17185], [-9785,17327], [-9757,17408], [-9679,17371], [-9608,17326], [-9461,17253], [-9288,17204], [-9408,17156], [-9449,17135], [-9487,16957], [-9517,16947], [-9595,16980], [-9657,16988], [-9677,17002] ] },
        { name: "ì°½ì„ ë™2ê°€", color: "#BB9955", points: [ [-10629,16175], [-10699,16274], [-10719,16340], [-10721,16437], [-10677,16480], [-10627,16526], [-10524,16490], [-10459,16455], [-10455,16376], [-10467,16292], [-10595,16247], [-10627,16175] ] },
        { name: "ì°½ì„ ë™3ê°€", color: "#BB9955", points: [ [-10525,15994], [-10523,15994], [-10585,16039], [-10599,16099], [-10630,16175], [-10593,16249], [-10472,16291], [-10362,16290], [-10292,16265], [-10239,16212], [-10182,16182], [-10110,16160], [-10189,16101], [-10276,16054], [-10332,16033], [-10451,16010], [-10520,15994] ] },
        { name: "ì°½ì„ ë™1ê°€", color: "#BB9955", points: [ [-10363,16288], [-10465,16287], [-10461,16459], [-10328,16494], [-10259,16559], [-10159,16521], [-10159,16329], [-10181,16185], [-10240,16208], [-10302,16273], [-10362,16287] ] },
        { name: "í›ˆë™", color: "#BB9955", points: [ [-10180,16186], [-10160,16317], [-10161,16520], [-10127,16581], [-10070,16587], [-10022,16568], [-10014,16563], [-10014,16422], [-9988,16357], [-10020,16278], [-10089,16188], [-10112,16149], [-10184,16184], [-10159,16319] ] },
        { name: "ì›ë™2ê°€", color: "#BB9955", points: [ [-10727,16439], [-10791,16494], [-10808,16584], [-10829,16653], [-10773,16721], [-10653,16747], [-10579,16770], [-10540,16771], [-10522,16716], [-10492,16606], [-10467,16582], [-10471,16524], [-10467,16482], [-10459,16454], [-10624,16524], [-10723,16436] ] },
        { name: "ì›ë™1ê°€", color: "#BB9955", points: [ [-10824,16662], [-10905,16802], [-10874,16889], [-10855,16922], [-10824,16971], [-10807,17003], [-10739,17003], [-10703,17020], [-10682,17027], [-10621,16893], [-10535,16777], [-10747,16724], [-10775,16722], [-10835,16653] ] },
        { name: "ì›ë™3ê°€", color: "#BB9955", points: [ [-10453,16458], [-10324,16497], [-10254,16560], [-10299,16626], [-10315,16672], [-10308,16699], [-10332,16736], [-10354,16746], [-10413,16738], [-10426,16725], [-10491,16712], [-10522,16718], [-10497,16606], [-10461,16582], [-10471,16516], [-10464,16460] ] },
        { name: "ì›ë™4ê°€", color: "#BB9955", points: [ [-10418,16744], [-10420,16809], [-10450,16867], [-10420,16883], [-10364,16884], [-10331,16871], [-10258,16897], [-10221,16902], [-10187,16900], [-10149,16890], [-10130,16885], [-10139,16936], [-10176,16948], [-10222,16980], [-10263,16999], [-10300,16999], [-10408,17016], [-10477,17034], [-10558,17066], [-10616,17120], [-10696,17205], [-10810,17011], [-10800,17001], [-10681,17024], [-10610,16866], [-10538,16779], [-10522,16713], [-10429,16720], [-10408,16737], [-10423,16738] ] },
        { name: "ì§€ìœ ë™2ê°€", color: "#BB9955", points: [ [-10281,16603], [-10181,16710], [-10166,16751], [-10171,16845], [-10167,16886], [-10170,16895], [-10228,16904], [-10288,16888], [-10331,16873], [-10368,16889], [-10377,16884], [-10414,16879], [-10448,16869], [-10416,16800], [-10418,16734], [-10342,16742], [-10309,16693], [-10315,16656], [-10281,16602] ] },
        { name: "ì§€ìœ ë™1ê°€", color: "#BB9955", points: [ [-10075,16887], [-10128,16884], [-10166,16893], [-10166,16802], [-10167,16744], [-10247,16642], [-10285,16602], [-10248,16556], [-10158,16521], [-10125,16584], [-10066,16588], [-10014,16563], [-9957,16612], [-9907,16681], [-9913,16740], [-9995,16780], [-10063,16876], [-10073,16891] ] }
    ];


    // =========================================================
    // 3. ë ˆì´ì–´ ê·¸ë£¹ ë° ë°ì´í„° ì¶”ê°€
    // =========================================================
    var adminLayerGroup = L.layerGroup();
    var devLayerGroup = L.layerGroup();
    var legalDongLayerGroup = L.layerGroup();
    
    // (A) í–‰ì •êµ¬ì—­(adminData) ë£¨í”„
    adminData.forEach(function(d) {
        var color = d.color || getColorByName(d.name);
        // êµ¬(Gu)ëŠ” ì„  êµµê²Œ(3), ì/ë©´/ë¦¬(Eup/Myeon)ëŠ” ë³´í†µ(2)
        var weightStyle = d.name.includes("êµ¬") ? 3 : 2; 

        var latlngs = d.points;
        
        // MultiPolygon (ë‚¨êµ¬ì²˜ëŸ¼ ì„¬ì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš°)
        if (Array.isArray(d.points[0][0])) {
            d.points.forEach(function(polygonPoints) {
                L.polygon(polygonPoints, { color: color, fillColor: color, fillOpacity: 0.15, weight: weightStyle }).addTo(adminLayerGroup);
            });
            // ì´ë¦„í‘œëŠ” ì²« ë²ˆì§¸ ë©ì–´ë¦¬ì˜ ì¤‘ì‹¬ì—
            var center = L.polygon(d.points[0]).getBounds().getCenter();
            L.marker(center, { icon: L.divIcon({ className: 'district-label', html: d.name.split('(')[0], iconSize: [120, 20], iconAnchor: [60, 10] }) }).addTo(adminLayerGroup);
        } 
        // Single Polygon
        else {
            L.polygon(latlngs, { color: color, fillColor: color, fillOpacity: 0.15, weight: weightStyle }).addTo(adminLayerGroup);
            var center = L.polygon(latlngs).getBounds().getCenter();
            L.marker(center, { icon: L.divIcon({ className: 'district-label', html: d.name.split('(')[0], iconSize: [120, 20], iconAnchor: [60, 10] }) }).addTo(adminLayerGroup);
        }
    });

    // (B) ê°œë°œì§€êµ¬(devData) ë£¨í”„ - ì ì„ 
    devData.forEach(function(d) {
        var polygon = L.polygon(d.points, { color: d.color, fillColor: d.color, fillOpacity: 0.1, weight: 3, dashArray: '10, 10' }).addTo(devLayerGroup);
        var center = polygon.getBounds().getCenter();
        L.marker(center, { icon: L.divIcon({ className: 'dev-label', html: d.name, iconSize: [150, 20], iconAnchor: [75, 10] }) }).addTo(devLayerGroup);
    });

    // (C) ë²•ì •ë™(legalDongData) ë£¨í”„ - ì–‡ì€ ì‹¤ì„ , ê¸°ë³¸ì ìœ¼ë¡œ êº¼ë‘ 
    legalDongData.forEach(function(d) {
        var polygon = L.polygon(d.points, { color: "#ffffff", fillColor: d.color, fillOpacity: 0.2, weight: 1 }).addTo(legalDongLayerGroup);
        var center = polygon.getBounds().getCenter();
        L.marker(center, { icon: L.divIcon({ className: 'legaldong-label', html: d.name, iconSize: [100, 20], iconAnchor: [50, 10] }) }).addTo(legalDongLayerGroup);
    });

    // =========================================================
    // 4. ë ˆì´ì–´ ì»¨íŠ¸ë¡¤ ì„¤ì •
    // =========================================================
    var overlays = {
        "ğŸ—ºï¸ í–‰ì •êµ¬ì—­(8êµ¬1êµ°)": adminLayerGroup,
        "ğŸ—ï¸ ê°œë°œì§€êµ¬(ì‹ ë„ì‹œ)": devLayerGroup,
        "ğŸ˜ï¸ ë²•ì •ë™(ì¤‘êµ¬)": legalDongLayerGroup
    };
    
    // ì´ˆê¸° í™œì„±í™” ë ˆì´ì–´
    adminLayerGroup.addTo(map);
    devLayerGroup.addTo(map);
    
    L.control.layers(null, overlays, { collapsed: false }).addTo(map);


    // =========================================================
    // 5. ê·¸ë¦¬ê¸° ë„êµ¬ (ë”ë¸”í´ë¦­ ì‚­ì œ ì ìš©)
    // =========================================================
    var isDrawing = false; var drawPoints = []; var drawPolyline = null; var tempLine = null;
    var myLines = JSON.parse(localStorage.getItem('hyobin_lines')) || [];
    myLines.forEach(lineData => { addLineToMap(lineData); });

    function addLineToMap(lineData) {
        var lineColor = lineData.color || "red"; 
        var polyline = L.polyline(lineData.points, { color: lineColor, weight: 5, opacity: 0.8 }).addTo(map);
        
        // â˜… ë”ë¸” í´ë¦­ ì‹œ ì‚­ì œ (ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨)
        polyline.on('dblclick', function(e) {
            L.DomEvent.stopPropagation(e); 
            if (confirm(`'${lineData.name}' ì„ ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                map.removeLayer(polyline);
                myLines = myLines.filter(l => l.name !== lineData.name);
                localStorage.setItem('hyobin_lines', JSON.stringify(myLines));
            }
        });

        // í´ë¦­ ì‹œ ì •ë³´ íŒì—…
        polyline.on('click', function(e) {
            L.popup().setLatLng(e.latlng).setContent(`<b>${lineData.name}</b><br><span style="font-size:11px; color:#666">(ë”ë¸”í´ë¦­í•˜ì—¬ ì‚­ì œ)</span>`).openOn(map);
        });
    }

    function toggleDrawMode() {
        isDrawing = !isDrawing; var btn = document.getElementById("draw-btn");
        if (isDrawing) {
            btn.classList.add("active-btn"); btn.innerHTML = "âœï¸ ê·¸ë¦¬ëŠ” ì¤‘... (ìš°í´ë¦­ ì¢…ë£Œ)";
            document.getElementById("map").style.cursor = "crosshair"; drawPoints = [];
        } else { resetDrawMode(); }
    }
    function resetDrawMode() {
        isDrawing = false; var btn = document.getElementById("draw-btn");
        btn.classList.remove("active-btn"); btn.innerHTML = "ğŸ“ ê·¸ë¦¬ê¸°";
        document.getElementById("map").style.cursor = "default";
        if (drawPolyline) map.removeLayer(drawPolyline); if (tempLine) map.removeLayer(tempLine); drawPoints = [];
    }

    map.on('click', function(e) {
        if (isDrawing) {
            var lat = Math.round(e.latlng.lat); var lng = Math.round(e.latlng.lng);
            drawPoints.push([lat, lng]); redrawLine();
        } else { console.log(`[${Math.round(e.latlng.lat)}, ${Math.round(e.latlng.lng)}]`); }
    });

    map.on('mousemove', function(e) {
        if (isDrawing && drawPoints.length > 0) {
            var lastPoint = drawPoints[drawPoints.length - 1];
            if (tempLine) map.removeLayer(tempLine);
            tempLine = L.polyline([lastPoint, e.latlng], { color: currentSelectedColor, dashArray: '5, 10', weight: 2 }).addTo(map);
        }
    });

    document.addEventListener('keydown', function(e) {
        if (isDrawing && drawPoints.length > 0 && (e.key === 'Backspace' || e.key === 'Delete')) {
            drawPoints.pop(); redrawLine(); if (tempLine) map.removeLayer(tempLine);
        }
    });

    function redrawLine() {
        if (drawPolyline) map.removeLayer(drawPolyline);
        if (drawPoints.length > 0) {
            drawPolyline = L.polyline(drawPoints, { color: currentSelectedColor, weight: 5 }).addTo(map);
        } else { drawPolyline = null; }
    }

    var tempMarkerData = null;
    map.on('contextmenu', function(e) {
        if (isDrawing) {
            if (drawPoints.length > 1) {
                var totalDistance = 0; for(var i=0; i<drawPoints.length-1; i++) totalDistance += map.distance(drawPoints[i], drawPoints[i+1]);
                var lineName = prompt(`ì¸¡ì • ê±°ë¦¬: ${Math.round(totalDistance)}m\n\nì´ ì„ ì„ ì €ì¥í•˜ë ¤ë©´ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.`);
                if (lineName) {
                    var newLine = { name: lineName, points: drawPoints, color: currentSelectedColor };
                    myLines.push(newLine); localStorage.setItem('hyobin_lines', JSON.stringify(myLines));
                    addLineToMap(newLine); alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
                }
            }
            resetDrawMode();
        } else {
            var name = prompt("ë§ˆì»¤ ì´ë¦„:"); if (!name) return;
            tempMarkerData = { name: name, lat: Math.round(e.latlng.lat), lng: Math.round(e.latlng.lng) };
            openColorModal();
        }
    });

    function openColorModal() {
        var modal = document.getElementById('color-modal'); var container = document.getElementById('modal-color-buttons'); container.innerHTML = "";
        regionColors.forEach(function(rc) {
            var btn = document.createElement('div'); btn.className = 'color-btn'; btn.style.backgroundColor = rc.code; btn.innerHTML = rc.name; 
            btn.onclick = function() { selectMarkerColor(rc.code); }; container.appendChild(btn);
        });
        modal.style.display = 'flex';
    }
    function closeColorModal() { document.getElementById('color-modal').style.display = 'none'; tempMarkerData = null; }
    function selectMarkerColor(color) {
        if (tempMarkerData) {
            var item = { name: tempMarkerData.name, lat: tempMarkerData.lat, lng: tempMarkerData.lng, color: color };
            addMarkerToMap(item); myLandmarks.push(item); localStorage.setItem('hyobin_markers', JSON.stringify(myLandmarks));
        } closeColorModal();
    }

    // =========================================================
    // 6. ëœë“œë§ˆí¬ ë§ˆì»¤
    // =========================================================
    var defaultLandmarks = [
        { name: "íš¨ë¹ˆê´‘ì—­ì‹œì²­(ë¶êµ¬ ê³ ì†¡ë™)", lat: -4919, lng: 18779, color: "#7799CC" },
        { name: "ë¶êµ¬ì²­(ë¶êµ¬ ì¤‘ìˆ˜ë™)", lat: -5758, lng: 25179, color: "#7799CC" },
        { name: "ì„œêµ¬ì²­(ì„œêµ¬ ë‹¹ì„ ë™)", lat: -7599, lng: 16791, color: "#00AABB" },
        { name: "ì¤‘êµ¬ì²­(ì¤‘êµ¬ ì¡°ìœ ë™2ê°€)", lat: -9618, lng: 18087, color: "#BB9955" },
        { name: "ë™êµ¬ì²­(ë™êµ¬ ë•í˜„ë™)", lat: -10073, lng: 21524, color: "#FF9922" },
        { name: "ë‚¨êµ¬ì²­(ë‚¨êµ¬ í‰ë‹¹ë™)", lat: -14029, lng: 10020, color: "#DDBBFF" },
        { name: "ì²­ì—½êµ¬ì²­(ì²­ì—½êµ¬ ì²­ì—½ë™)", lat: -11565, lng: 22485, color: "#006699" },
        { name: "ì°½ì „êµ¬ì²­(ì°½ì „êµ¬ ì°½ì „ë™)", lat: -14412, lng: 25279, color: "#33AAFF" },
        { name: "ì•ˆì²œêµ¬ì²­(ì•ˆì²œêµ¬ ì•ˆì²œë™)", lat: -9309, lng: 31997, color: "#AA66DD" },
        { name: "ì•ˆì²œêµ¬ì²­ ì´ìì¶œì¥ì†Œ(ì•ˆì²œêµ¬ ì´ìë™)", lat: -8958, lng: 35828, color: "#AA66DD" },
        { name: "íƒ„ì„±êµ°ì²­(íƒ„ì„±êµ° íƒ„ì„±ì ê³µë¦¬)", lat: -16561, lng: 32507, color: "#BBFF64" },
        { name: "íš¨ë¹ˆê³ ë“±ë²•ì›(ë¶êµ¬ ì¤‘ìˆ˜ë™)", lat: -6631, lng: 24774, color: "#7799CC" },
        { name: "íš¨ë¹ˆì—­(ë™êµ¬ ì‚¬ê°€ë‹¹ë™)", lat: -9850, lng: 20693, color: "#FF9922" },
        { name: "íš¨ë¹ˆê³ ì†ë²„ìŠ¤í„°ë¯¸ë„(ë¶êµ¬ í•´ì„œë™)", lat: -7895, lng: 20254, color: "#7799CC" },
        { name: "íš¨ë¹ˆëŒ€í•™êµ(ì„œêµ¬ ë‹¹ì„ ë™)", lat: -7499, lng: 18228, color: "#00AABB" },
        { name: "ê³ ì†¡êµì°¨ë¡œì—­(ë¶êµ¬ ê³ ì†¡ë™)(ë„ì‹œì² ë„ 2,6í˜¸ì„ )", lat: -4751, lng: 17979, color: "#7799CC" },
        { name: "í˜„ëŒ€ë°±í™”ì  íš¨ë¹ˆì (ë¶êµ¬ ê³ ì†¡ë™)", lat: -4885, lng: 18379, color: "#7799CC" },
        { name: "ì• ë‹ˆë©”ì´íŠ¸ íš¨ë¹ˆì (ë¶êµ¬ ê³ ì†¡ë™)", lat: -4773, lng: 18356, color: "#7799CC" },
        { name: "ì—½ì›”ëŒ€í•™êµ ë³‘ì›(ë‚¨êµ¬ ì–´ê°„ë™)", lat: -11686, lng: 5609, color: "#DDBBFF" },
        { name: "HDí˜„ëŒ€ì¤‘ê³µì—…", lat: -14500, lng: 13400, color: "#FF9922" },
        { name: "íš¨ë¹ˆ ì¢…í•©ìš´ë™ì¥(ë¶êµ¬ ì…í¬ë™)", lat: -5761, lng: 22160, color: "#7799CC" },
        { name: "HSCO(ë¶êµ¬ ìƒê³¡ë™)", lat: -8537, lng: 20362, color: "#7799CC" }
    ];
    var myLandmarks = JSON.parse(localStorage.getItem('hyobin_markers')) || [];
    var allLandmarks = defaultLandmarks.concat(myLandmarks);
    var activeMarkers = [];

    allLandmarks.forEach(item => addMarkerToMap(item));
    function calculateSize(zoom) { return Math.max(baseMarkerSize + (zoom * sizeMultiplier), minMarkerSize); }
    function addMarkerToMap(item) {
        var size = calculateSize(map.getZoom());
        var marker = L.marker([item.lat, item.lng], { icon: createCustomIcon(item.color, size) }).addTo(map).bindPopup(`<b style="color:${item.color}">${item.name}</b>`);
        marker.myColor = item.color; activeMarkers.push(marker);
    }
    map.on('zoomend', function() {
        var newSize = calculateSize(map.getZoom());
        activeMarkers.forEach(m => m.setIcon(createCustomIcon(m.myColor, newSize)));
    });

    function exportData() {
        if (myLandmarks.length === 0 && myLines.length === 0) { alert("ë°ì´í„° ì—†ìŒ"); return; }
        var code = "// [1] ë³µì‚¬ìš© ë§ˆì»¤:\n"; myLandmarks.forEach(i => { code += `{ name: "${i.name}", lat: ${i.lat}, lng: ${i.lng}, color: "${i.color}" },\n`; });
        code += "\n// [2] ë³µì‚¬ìš© ì„ /êµ¬ì—­:\n"; myLines.forEach(l => { code += `{ name: "${l.name}", color: "${l.color}", points: [ [${l.points.join("], [")}] ] },\n`; });
        navigator.clipboard.writeText(code); alert("ë³µì‚¬ ì™„ë£Œ!");
    }
    function clearAllData() { if(confirm("ì´ˆê¸°í™”?")) { localStorage.removeItem('hyobin_markers'); localStorage.removeItem('hyobin_lines'); location.reload(); } }

</script>
</body>
</html>